<ng-template #pagination let-name="name">
  <div class="pagination join">
    @for (index of pages; track $index) {
    <input
      type="radio"
      name="{{ name || 'paging' }}"
      class="join-item btn btn-square"
      [attr.checked]="page === index + 1 ? true : null"
      (click)="goToPage(index + 1)"
      [attr.aria-label]="index + 1"
      value="{{ index + 1 }}"
    />
    }
  </div>
</ng-template>

<div>
  <div class="py-2">
    <ng-container
      *ngTemplateOutlet="pagination; context: { name: 'topPaging' }"
    ></ng-container>
  </div>

  <div class="flex flex-col flex-wrap">
    @for (sub of subscriptions; track sub.id) {
    <div class="card image-full card-md bg-base-200 shadow-sm w-full">
      <figure>
        <img
          class="w-32 h-32"
          width="32"
          height="32"
          [src]="sub.thumbnailUrl"
          alt="Channel Thumbnail"
        />
      </figure>

      <div class="card-body">
        <div class="card-actions justify-end">
          @if (sub.isSubscribed) {
          <button
            class="btn btn-soft btn-primary"
            (click)="unsubscribe(sub.id)"
          >
            Unsubscribe
          </button>
          } @else {
          <button
            class="btn btn-outline btn-primary"
            (click)="subscribe(sub.channelId)"
          >
            Subscribe
          </button>
          }
        </div>
        <h2 class="card-title">{{ sub.title }}</h2>
        <p class="text-justify">{{ sub.description }}</p>
      </div>
    </div>
    }
  </div>

  <div class="py-2">
    <ng-container *ngTemplateOutlet="pagination"></ng-container>
  </div>
</div>
